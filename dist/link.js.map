{"version":3,"file":"link.js","sourceRoot":"","sources":["../src/link.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAC,IAAI,EAAC,MAAM,KAAK,CAAC;AACzB,OAAO,EAAC,aAAa,EAAE,KAAK,EAAC,MAAM,mBAAmB,CAAC;AACvD,OAAO,EAAC,MAAM,EAAC,MAAM,eAAe,CAAC;AACrC,OAAO,EAAC,wBAAwB,EAAC,MAAM,0CAA0C,CAAC;AAClF,OAAO,EAAC,QAAQ,EAAC,MAAM,wBAAwB,CAAC;AAChD,OAAO,6BAA6B,CAAC;AACrC,OAAO,yBAAyB,CAAC;AACjC,OAAO,oCAAoC,CAAC;AAC5C,OAAO,sBAAsB,CAAC;AAC9B,OAAO,oBAAoB,CAAC;AAC5B,OAAO,EAAE,QAAQ,EAAE,MAAM,4BAA4B,CAAC;AAEtD;;;;;GAKG;AAEI,IAAM,qBAAqB,GAA3B,MAAM,qBAAsB,SAAQ,wBAAwB;IAA5D;;QAIL,eAAU,GAAG,KAAK,CAAC;QAGnB,mBAAc,GAAG,KAAK,CAAC;IAiGzB,CAAC;IA/FU,MAAM;QACb,OAAO,IAAI,CAAA;;UAEL,IAAI,CAAC,SAAS,KAAK,QAAQ,CAAC,iBAAiB;YAC7C,CAAC,CAAC,IAAI,CAAA,iDAAiD;YACvD,CAAC,CAAC,EAAE;;iBAEG,IAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI,CAAC,IAAI;mBAC5B,IAAI,CAAC,MAAM;;gBAEd,IAAI,CAAC,GAAG;;yBAEC,QAAQ,CAAC,cAAc;;;yDAGS,QAAQ,CAAC,KAAK;gBACvD,IAAI,CAAC,UAAU;YACf,CAAC,CAAC,IAAI,CAAA;;;mCAGa,QAAQ,CAAC,cAAc;qBACrC;YACL,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK;;;;6BAIR,QAAQ,CAAC,WAAW;;gBAEjC,IAAI,CAAC,UAAU;YACf,CAAC,CAAC,IAAI,CAAA;;;;;;;;;;mBAUH;YACH,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW;;;gBAG3B,IAAI,CAAC,UAAU;YACf,CAAC,CAAC,IAAI,CAAA;;;;uCAIiB,QAAQ,CAAC,gBAAgB;;;;;;;;;;;;;;;;;;mBAkB7C;YACH,CAAC,CAAC,IAAI,CAAA;;oCAEc,IAAI,CAAC,QAAQ,CAAC,OAAO;;yCAEhB,QAAQ,CAAC,MAAM;yBAC/B,IAAI,CAAC,QAAQ,CAAC,MAAM;uBACtB,IAAI,CAAC,QAAQ,CAAC,MAAM;gBACrB,CAAC,CAAC,IAAI,CAAA,sBAAsB,QAAQ,CAAC,MAAM;6BACpC,IAAI,CAAC,QAAQ,CAAC,MAAM;0BACvB;gBACJ,CAAC,CAAC,EAAE;mBACP;;;;;2BAKQ,IAAI,CAAC,UAAU;0BAChB,IAAI,CAAC,QAAQ,EAAE,QAAQ;0BACvB,IAAI,CAAC,QAAQ,EAAE,QAAQ;;;;UAIvC,OAAO,IAAI,CAAC,aAAa,KAAK,WAAW;YACzC,CAAC,CAAC,EAAE;YACJ,CAAC,CAAC,IAAI,CAAA,iDAAiD;;KAE5D,CAAC;IACJ,CAAC;;AAtGe,4BAAM,GAAG,MAAM,AAAT,CAAU;AAGhC;IADC,KAAK,EAAE;yDACW;AAGnB;IADC,KAAK,EAAE;6DACe;AAPZ,qBAAqB;IADjC,aAAa,CAAC,iBAAiB,CAAC;GACpB,qBAAqB,CAwGjC","sourcesContent":["import {html} from 'lit';\nimport {customElement, state} from 'lit/decorators.js';\nimport {styles} from './link.styles';\nimport {LinkPreviewDataDirective} from './directives/link-preview-data-directive';\nimport {TEST_IDS} from './lib/util/test-helper';\nimport './components/skeleton-shape';\nimport './components/limit-info';\nimport './components/powered-by-previewbox';\nimport './components/favicon';\nimport './components/image';\nimport { ApiError } from './lib/services/api-fetcher';\n\n/**\n * Previewbox Link\n *\n * @csspart link - The a-element that contains the link\n * @csspart container - The container element that contains the anchor element\n */\n@customElement('previewbox-link')\nexport class PreviewBoxLinkElement extends LinkPreviewDataDirective {\n  static override styles = styles;\n\n  @state()\n  isImgError = false;\n\n  @state()\n  isFaviconError = false;\n\n  override render() {\n    return html`\n      <figure part=\"container\" class=\"container\">\n        ${this._apiError === ApiError.API_LIMIT_REACHED\n          ? html`<previewbox-limit-info></previewbox-limit-info>`\n          : ''}\n        <a\n          href=${this.linkData.url || this.href}\n          target=${this.target}\n          part=\"link\"\n          rel=${this.rel}\n          class=\"previewbox-link\"\n          data-testid=\"${TEST_IDS.ANCHOR_ELEMENT}\"\n        >\n          <div class=\"previewbox-content\">\n            <div class=\"previewbox-title\" data-testid=\"${TEST_IDS.TITLE}\">\n              ${this._isLoading\n                ? html`<previewbox-skeleton-shape\n                    width=\"200px\"\n                    height=\"20px\"\n                    data-testid=\"${TEST_IDS.TITLE_SKELETON}\"\n                  />`\n                : this.linkData.title}\n            </div>\n            <div\n              class=\"previewbox-description\"\n              data-testid=\"${TEST_IDS.DESCRIPTION}\"\n            >\n              ${this._isLoading\n                ? html`\n                    <previewbox-skeleton-shape\n                      width=\"100%\"\n                      height=\"16px\"\n                    ></previewbox-skeleton-shape>\n                    <previewbox-skeleton-shape\n                      width=\"70%\"\n                      height=\"16px\"\n                      style=\"margin-top: 4px;\"\n                    ></previewbox-skeleton-shape>\n                  `\n                : this.linkData.description}\n            </div>\n            <div class=\"previewbox-metadata\">\n              ${this._isLoading\n                ? html`\n                    <div class=\"previewbox-metadata-skeleton\">\n                      <previewbox-skeleton-shape\n                        width=\"14px\"\n                        data-testid=\"${TEST_IDS.FAVICON_SKELETON}\"\n                        height=\"14px\"\n                        class=\"rounded\"\n                      ></previewbox-skeleton-shape>\n                      <previewbox-skeleton-shape\n                        width=\"60px\"\n                        height=\"14px\"\n                      ></previewbox-skeleton-shape>\n                      <previewbox-skeleton-shape\n                        width=\"4px\"\n                        height=\"4px\"\n                        class=\"rounded\"\n                      ></previewbox-skeleton-shape>\n                      <previewbox-skeleton-shape\n                        width=\"44px\"\n                        height=\"14px\"\n                      ></previewbox-skeleton-shape>\n                    </div>\n                  `\n                : html`\n                    <previewbox-favicon\n                      .faviconUrl=${this.linkData.favicon}\n                    ></previewbox-favicon>\n                    <span data-testid=\"${TEST_IDS.ORIGIN}\"\n                      >${this.linkData.origin}</span\n                    >${this.linkData.author\n                      ? html`<span data-testid=\"${TEST_IDS.AUTHOR}\"\n                          >${this.linkData.author}</span\n                        >`\n                      : ''}\n                  `}\n            </div>\n          </div>\n          <div class=\"previewbox-thumbnail\">\n            <previewbox-image\n              .isLoading=${this._isLoading}\n              .imageUrl=${this.linkData?.imageUrl}\n              .imageAlt=${this.linkData?.imageAlt}\n            ></previewbox-image>\n          </div>\n        </a>\n        ${typeof this.hidePoweredBy !== 'undefined'\n          ? ''\n          : html`<powered-by-previewbox></powered-by-previewbox>`}\n      </figure>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'previewbox-link': PreviewBoxLinkElement;\n  }\n}\n"]}